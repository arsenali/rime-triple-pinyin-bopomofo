# Rime schema
# encoding: utf-8

schema:
  schema_id: triple_pinyin_bopomofo
  name: ææ°æ³¨éŸ³
  version: "3.5"
  author:
    - ä½›æŒ¯ <chen.sst@gmail.com>
    - é˜¿æ£®ç´è£¡ <15678407@qq.com>
  description: |
    15éµå…§å¯¦ç¾â€œè²æ¯+ä»‹éŸ»+å»é‡ç¢¼&è²èª¿â€ä¸‰ç¢¼è¼¸å…¥ä¸€å€‹å¸¶èª¿éŸ³ç¯€ï¼›
    ä»‹éŸ»åˆ†ç‚ºå››å€ï¼šã„š/ã„/ã„¢,ã„›/ã„Ÿ/ã„£,ã„œ/ã„ /ã„¤,ã„/ã„¡/ã„¥ï¼›
    å¯ç”¨HSPNZï¼ˆæ©«è±æ’‡æºæŠ˜ï¼‰é€£çºŒè¼¸å…¥ç­†ç•«è¼”åŠ©ç¢¼é€²è¡Œé€å­—ç¯©é¸ï¼›
    ä¸Šå±ç¢¼å’Œæç¤ºç¢¼æœ‰å…¨æ‹¼ï¼ˆç„¡èª¿æ‹¼éŸ³ï¼‰ã€å¸¶èª¿æ‹¼éŸ³ã€æ³¨éŸ³ç¬¦è™Ÿå’Œåœ‹èªç¾…é¦¬å­—å››ç¨®å½¢å¼ï¼Œå¯ä»»æ„åˆ‡æ›ã€‚
  dependencies:
    - luna_pinyin
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è‹±æ–‡ ]
    
  - name: simplification
    states: [ ç¹é«”, ç®€ä½“ ]
    
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
    
  - options: [ bopomofo_quanpin, bopomofo_ddpy, bopomofo_zhuyin, bopomofo_guoluo, bopomofo_translator ]
    states: [ å…¨æ‹¼, æ‹¼éŸ³, æ³¨éŸ³, åœ‹ç¾…, åŸç¢¼ ]
    
  - name: small_mode
    states: [ é›™æ‰‹, å–®æ‰‹ ]
    
  - name: ascii_punct
    states: [ ï¼Œã€‚, ï¼Œï¼ ]
    
  - options: [ VOICE_ASSIST ]
    states: [ "ğŸ™" ]
    
  - options: [ _Keyboard_emoji ]
    states: [ "ğŸ˜Š" ]
    
  - options: [ _Keyboard_symbols ]
    states: [ "ğŸ”£" ]
    
  - options: [ _Keyboard_clip ]
    states: [ "ğŸ“‹" ]
    
  # - options: [ Keyboard_lssp3, Keyboard_lssp3wsd ]
    # states: [ è¼•è², ç„¡è²èª¿ ]
    
  - options: [ Menu ]
    states: [ "æ–¹æ¡ˆ" ]
    
  - options: [ Theme_settings ]
    states: [ "ä¸»é¡Œ" ]
    
  - options: [ Color_switch ]
    states: [ "é…è‰²" ]
    
  - options: [ Hint_switch ]
    states: [ "åŠ©è¨˜" ]
    
  - options: [ IME_switch ]
    states: [ "ğŸŒ" ]

engine:
  processors:
    - lua_processor@*limited
    - lua_processor@*lssp_processor
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor  # ç·¨è¼¯å™¨
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator  # æ²’æœ‰å…¶ä»–çµæœæ™‚ï¼Œå‰µå»ºä¸€å€‹èˆ‡ç·¨ç¢¼ä¸²ä¸€æ¨£çš„å€™é¸é …
    - punct_translator
    - reverse_lookup_translator@luna_pinyin_lookup
    - reverse_lookup_translator@stroke_lookup
    - lua_translator@*triple_pinyin_bopomofo
    - script_translator
  filters:
    - simplifier
    - lua_filter@*aux_code_stroke
    - uniquifier

speller:             # æ‹¼å¯«è™•ç†å™¨ï¼šè©å…¸ç·¨ç¢¼->è¼¸å…¥ç¢¼
  alphabet: 'qwertyasdfghzxcvbnHSPNZ'
  initials: 'qwertyasdfghzxcvbn'
  delimiter: " ;'"
  # auto_clear: auto # manual|auto|max_length ç©ºç¢¼æŒ‰ä¸‹ä¸€éµç¢ºèªæ¸…å±|ç©ºç¢¼è‡ªå‹•æ¸…å±|é”åˆ°æœ€é•·ç¢¼æ™‚å¾Œç¢¼é ‚ä¸Šæ¸…å±
  algebra:                             # è©å…¸ç·¨ç¢¼->è¼¸å…¥ç¢¼
   # è¬è±¡è©åº«è™•ç†
    - xform/^([a-zÄÅÄ“Ä«Å«Ç–Ã¡Ã³Ã©Ã­ÃºÇ˜ÇÇ’Ä›ÇÇ”ÇšÃ Ã²Ã¨Ã¬Ã¹ÇœÃ¼Å„ÅˆÇ¹]+);[;,a-z]+$/$1/        # åˆªé™¤è¼”åŠ©ç¢¼
    - xform/Ä(\w*)/a$1\x31/
    - xform/Å(\w*)/o$1\x31/
    - xform/Ä“(\w*)/e$1\x31/
    - xform/Ä«(\w*)/i$1\x31/
    - xform/Å«(\w*)/u$1\x31/
    - xform/Ç–(\w*)/v$1\x31/
    - xform/Ã¡(\w*)/a$1\x32/
    - xform/Ã³(\w*)/o$1\x32/
    - xform/Ã©(\w*)/e$1\x32/
    - xform/Ã­(\w*)/i$1\x32/
    - xform/Ãº(\w*)/u$1\x32/
    - xform/Ç˜(\w*)/v$1\x32/
    - xform/Ç(\w*)/a$1\x33/
    - xform/Ç’(\w*)/o$1\x33/
    - xform/Ä›(\w*)/e$1\x33/
    - xform/Ç(\w*)/i$1\x33/
    - xform/Ç”(\w*)/u$1\x33/
    - xform/Çš(\w*)/v$1\x33/
    - xform/Ã (\w*)/a$1\x34/
    - xform/Ã²(\w*)/o$1\x34/
    - xform/Ã¨(\w*)/e$1\x34/
    - xform/Ã¬(\w*)/i$1\x34/
    - xform/Ã¹(\w*)/u$1\x34/
    - xform/Çœ(\w*)/v$1\x34/
    - xform/Ã¼/v/
    - xform/\w*Å„g?$/en\x32/
    - xform/\w*Åˆg?$/en\x33/
    - xform/\w*Ç¹g?$/en\x34/
    - erase/\w*[^a-z0-9 ]\w*/       # åˆªé™¤å«æœ‰å…¶ä»–éæ³•å­—ç¬¦çš„éŸ³ç¯€
    - xform/^([a-z]+)$/$1\x35/      # æœªæ¨™èª¿éŸ³ç¯€çµ±ä¸€è½‰æ›ç‚ºè¼•è²
   # 1  éŸ³ç¯€ä¿®æ­£åˆä½µ
    - erase/^xx$/
    - xform/^m([1-5])$/mu$1/        # é¼»éŸ³mï¼ˆå‘£ï¼‰è½‰åŒ–çˆ²mu
    - xform/^r5$/er5/               # r5ï¼ˆå…’ï¼‰è½‰åŒ–çˆ²er5
    # - xform/^eh([1-5])$/e$1/        # æ¨¡ç³ŠéŸ³ï¼šehï¼ˆèª’æ¬¸ï¼‰ã€eåˆä½µ
   # 2  æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/^([jqx])u/$1v/
    - xform/iu/iou/
    - xform/([uv])i/$1ei/
    - xform/(?<![uwv])ong/ung/
    - xform/([uwv])ong/$1ng/
    - xform/^yi?/i/
    - xform/^wu?/u/
    - xform/iu/v/
    - xform/([iuv])n/$1en/
   # 3  ç•°æ‹¼
    # - xform/([bpm])ueng/$1ong/
    # - xform/([bpm])veng/$1iong/
    # - derive/ueng/ong/
    # - derive/veng/iong/
    # - xform/(\w+)ueng/$1ong/
    # - xform/veng/iong/
    - erase/([bpm])([uv][a-z]+|v)([1-5])$/
    - erase/fao([1-5])$/
    - erase/(\w*)(iei|uou|vou)([1-5])$/
    - erase/(\w*)v(ee|ao|ang)([1-5])$/
    - erase/([zcs])io([1-5])$/
   # 4  å°–éŸ³è™•ç†
    - xform/^ziou([1-5])$/buo$1/
    - xform/^zii([1-5])$/buei$1/
    - xform/^zi(\w+[1-5])$/bu$1/
    - xform/^z(v\w*[1-5])$/b$1/
    - xform/^ciou([1-5])$/puo$1/
    - xform/^cii([1-5])$/puei$1/
    - xform/^ci(\w+[1-5])$/pu$1/
    - xform/^c(v\w*[1-5])$/p$1/
    - xform/^siou([1-5])$/muo$1/
    - xform/^sii([1-5])$/muei$1/
    - xform/^si(\w+[1-5])$/mu$1/
    - xform/^s(v\w*[1-5])$/m$1/
   # 5  éŸ³ç¯€åˆä½µ
    - xform/^([zcs]h?|r)i([1-5])$/$1o$2/
    - xform/^([zcs])([aoe]\w*)([1-5])$/$1hi$2$3/
    - xform/^([zcs])u([aoe]\w*)?([1-5])$/$1hv$2$3/
    - xform/^f([aoe]\w*)([1-5])$/ri$1$2/
    - xform/^fiao([1-5])$/riao$1/
    - xform/^fu([aoe]\w*)?([1-5])$/rv$1$2/
    
   # 6  ç¬¬1ç¢¼è²æ¯
    - xform/^b/Q/
    - xform/^p/W/
    - xform/^m/E/
    - xform/^[fr]/R/
    - xform/^d/A/
    - xform/^t/S/
    - xform/^n/D/
    - xform/^l/F/
    - xform/^[gj]/Z/
    - xform/^[kq]/X/
    - xform/^[hx]/C/
    - xform/^([aoeiuv])/V$1/
    - xform/^zh?/T/
    - xform/^ch?/G/
    - xform/^sh?/B/
   # 7  ç¬¬2ç¢¼éŸ»æ¯
    - xform/^([QWERTASDFGZXCVB])(a|ai|an)([1-5])$/$1Q$2$3/
    - xform/^([QWERTASDFGZXCVB])(o|ei|en)([1-5])$/$1W$2$3/
    - xform/^([QWERTASDFGZXCVB])(e|ao|ang)([1-5])$/$1E$2$3/
    - xform/^([QWERTASDFGZXCVB])(eh|ou|eng)([1-5])$/$1R$2$3/
    
    - xform/^([QWERTASDFGZXCVB])(ia|iai|ian)([1-5])$/$1A$2$3/
    - xform/^([QWERTASDFGZXCVB])(io|iei|ien|i)([1-5])$/$1S$2$3/
    - xform/^([QWERTASDFGZXCVB])(iee|iao|iang)([1-5])$/$1D$2$3/
    - xform/^([RTGB])(ie)([1-5])$/$1D$2$3/
    - xform/^([QWERTASDFGZXCVB])(ie|iou|ieng)([1-5])$/$1F$2$3/
    
    - xform/^([QWERTASDFGZXCVB])(ua|uai|uan)([1-5])$/$1Z$2$3/
    - xform/^([QWERTASDFGZXCVB])(uo|uei|uen)([1-5])$/$1X$2$3/
    - xform/^([QWERTASDFGZXCVB])(uee|uao|uang)([1-5])$/$1C$2$3/
    - xform/^([QWERTASDFGZXCVB])(ue|uou|ueng|u)([1-5])$/$1V$2$3/
    
    - xform/^([QWERTASDFGZXCVB])(va|vai|van|er)([1-5])$/$1T$2$3/
    - xform/^([QWERTASDFGZXCVB])(vo|vei|ven)([1-5])$/$1G$2$3/
    - xform/^([QWERTASDFGZXCVB])(ve|vou|veng|v)([1-5])$/$1B$2$3/
   # 8  ç¬¬3ç¢¼å»é‡ç¢¼&è²èª¿
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])1$/$1Q/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])2$/$1W/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])3$/$1E/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])4$/$1R/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])5$/$1T/
    
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])1$/$1A/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])2$/$1S/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])3$/$1D/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])4$/$1F/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])5$/$1G/
    
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)1$/$1Z/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)2$/$1X/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)3$/$1C/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)4$/$1V/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)5$/$1B/
    
    - erase/^[QWERTASDFGZXCVB][a-z0-9]+/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - erase/^[yuiophjklnm]\w*/
    
   # 9  ç°¡æ‹¼
    - derive/^t([qwertasdfgzxcvb]{2})$/y$1/
    - derive/^g([qwertasdfgzxcvb]{2})$/h$1/
    - derive/^b([qwertasdfgzxcvb]{2})$/n$1/
    - abbrev/^([qwertasdfgzxcvbyhn])[qwertasdfgzxcvb]{2}$/$1/     # é¦–ç¢¼ç°¡æ‹¼
    - derive/^([qwertasdfgzxcvbyhn])t([qwertasdfgzxcvb])$/$1y$2/
    - derive/^([qwertasdfgzxcvbyhn])g([qwertasdfgzxcvb])$/$1h$2/
    - derive/^([qwertasdfgzxcvbyhn])b([qwertasdfgzxcvb])$/$1n$2/
    - derive/^([qwertasdfgzxcvbyhn]{2})[qwertasdfgzxcvb]$/$1/     # å‰å…©ç¢¼ç°¡æ‹¼
    - derive/^([qwertasdfgzxcvbyhn]{2})[qwert]$/$1y/
    - derive/^([qwertasdfgzxcvbyhn]{2})[asdfg]$/$1h/
    - derive/^([qwertasdfgzxcvbyhn]{2})[zxcvb]$/$1n/
    # - derive/^([qwertasdfgzxcvbyhn])([qwertasdfgzxcvbyhn]{2})$/$2/     # å¾Œå…©ç¢¼ç°¡æ‹¼

quanpin:             # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šæ¼¢èªæ‹¼éŸ³å…¨æ‹¼
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_bopomofo
  spelling_hints: 4 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: &translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
    __append:
   # 1.1  ç¬¬1ç¢¼è²æ¯
    - xform/\<q(\w*)/B$1/
    - xform/\<w(\w*)/P$1/
    - xform/\<e(\w*)/M$1/
    - xform/\<r(\w*)/R$1/
    - xform/\<a(\w*)/D$1/
    - xform/\<s(\w*)/T$1/
    - xform/\<d(\w*)/N$1/
    - xform/\<f(\w*)/L$1/
    - xform/\<z(\w*)/G$1/
    - xform/\<x(\w*)/K$1/
    - xform/\<c(\w*)/H$1/
    - xform/\<v(\w*)/Y$1/
    - xform/\<[ty](\w*)/Z$1/
    - xform/\<[gh](\w*)/C$1/
    - xform/\<[bn](\w*)/S$1/
    - xform/\<([BPMDTNLGKHYZCSR])(?!\w)\>/$1-/              # é¦–ç¢¼ç°¡æ‹¼
   # 1.2  ç¬¬2ç¢¼éŸ»æ¯
    - xform/\<([BPMDTNLGKHYZCSR])q(\w|\>)/$1Q$2/
    - xform/\<([BPMDTNLGKHYZCSR])w(\w|\>)/$1W$2/
    - xform/\<([BPMDTNLGKHYZCSR])e(\w|\>)/$1E$2/
    - xform/\<([BPMDTNLGKHYZCSR])r(\w|\>)/$1R$2/
    - xform/\<([BPMDTNLGKHYZCSR])a(\w|\>)/$1iA$2/
    - xform/\<([BPMDTNLGKHYZCSR])s(\w|\>)/$1iS$2/
    - xform/\<([BPMDTNLGKHYZCSR])d(\w|\>)/$1iD$2/
    - xform/\<([BPMDTNLGKHYZCSR])f(\w|\>)/$1iF$2/
    - xform/\<([BPMDTNLGKHYZCSR])z(\w|\>)/$1uZ$2/
    - xform/\<([BPMDTNLGKHYZCSR])x(\w|\>)/$1uX$2/
    - xform/\<([BPMDTNLGKHYZCSR])c(\w|\>)/$1uC$2/
    - xform/\<([BPMDTNLGKHYZCSR])v(\w|\>)/$1uV$2/
    - xform/\<([BPMDTNLGKHYZCSR])t(\w|\>)/$1vT$2/
    - xform/\<([BPMDTNLGKHYZCSR])y(\w|\>)/$1vY$2/
    - xform/\<([BPMDTNLGKHYZCSR])g(\w|\>)/$1vG$2/
    - xform/\<([BPMDTNLGKHYZCSR])h(\w|\>)/$1vH$2/
    - xform/\<([BPMDTNLGKHYZCSR])b(\w|\>)/$1vB$2/
    - xform/\<([BPMDTNLGKHYZCSR])n(\w|\>)/$1vN$2/
    - xform/\<([BPMDTNLGKHYZCSR])Q(?!\w)\>/$1a-/            # å‰å…©ç¢¼ç°¡æ‹¼
    - xform/\<([BPMDTNLGKHYZCSR])iA(?!\w)\>/$1ia-/
    - xform/\<([BPMDTNLGKHYZCSR])uZ(?!\w)\>/$1ua-/
    - xform/\<([BPMDTNLGKHYZCSR])v[TY](?!\w)\>/$1va-/
    - xform/\<([BPMDTNLGKHYZCSR])W(?!\w)\>/$1o-/
    - xform/\<([BPMDTNLGKHYZCSR])iS(?!\w)\>/$1io-/
    - xform/\<([BPMDTNLGKHYZCSR])uX(?!\w)\>/$1uo-/
    - xform/\<([BPMDTNLGKHYZCSR])v[GH](?!\w)\>/$1vo-/
    - xform/\<([BPMDTNLGKHYZCSR])E(?!\w)\>/$1e-/
    - xform/\<([BPMDTNLGKHYZCSR])iD(?!\w)\>/$1ie-/
    - xform/\<([BPMDTNLGKHYZCSR])uC(?!\w)\>/$1ue-/
    - xform/\<([BPMDTNLGKHYZCSR])R(?!\w)\>/$1j-/
    - xform/\<([BPMDTNLGKHYZCSR])iF(?!\w)\>/$1ij-/
    - xform/\<([BPMDTNLGKHYZCSR])uV(?!\w)\>/$1uj-/
    - xform/\<([BPMDTNLGKHYZCSR])v[BN](?!\w)\>/$1vj-/
   # 1.3  ç¬¬3ç¢¼å»é‡ç¢¼&è²èª¿
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]q(?!-)\>/$1$2A\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]w(?!-)\>/$1$2A\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]e(?!-)\>/$1$2A\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]r(?!-)\>/$1$2A\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]t(?!-)\>/$1$2A\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]y(?!-)\>/$1$2A\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]a(?!-)\>/$1$2AI\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]s(?!-)\>/$1$2AI\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]d(?!-)\>/$1$2AI\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]f(?!-)\>/$1$2AI\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]g(?!-)\>/$1$2AI\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]h(?!-)\>/$1$2AI\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]z(?!-)\>/$1$2AN\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]x(?!-)\>/$1$2AN\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]c(?!-)\>/$1$2AN\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]v(?!-)\>/$1$2AN\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]b(?!-)\>/$1$2AN\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]n(?!-)\>/$1$2AN\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]q(?!-)\>/$1$2O\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]w(?!-)\>/$1$2O\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]e(?!-)\>/$1$2O\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]r(?!-)\>/$1$2O\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]t(?!-)\>/$1$2O\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]y(?!-)\>/$1$2O\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]a(?!-)\>/$1$2EI\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]s(?!-)\>/$1$2EI\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]d(?!-)\>/$1$2EI\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]f(?!-)\>/$1$2EI\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]g(?!-)\>/$1$2EI\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]h(?!-)\>/$1$2EI\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]z(?!-)\>/$1$2EN\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]x(?!-)\>/$1$2EN\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]c(?!-)\>/$1$2EN\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]v(?!-)\>/$1$2EN\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]b(?!-)\>/$1$2EN\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]n(?!-)\>/$1$2EN\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]q(?!-)\>/$1$2E\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]w(?!-)\>/$1$2E\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]e(?!-)\>/$1$2E\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]r(?!-)\>/$1$2E\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]t(?!-)\>/$1$2E\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]y(?!-)\>/$1$2E\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]a(?!-)\>/$1$2AO\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]s(?!-)\>/$1$2AO\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]d(?!-)\>/$1$2AO\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]f(?!-)\>/$1$2AO\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]g(?!-)\>/$1$2AO\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]h(?!-)\>/$1$2AO\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]z(?!-)\>/$1$2ANG\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]x(?!-)\>/$1$2ANG\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]c(?!-)\>/$1$2ANG\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]v(?!-)\>/$1$2ANG\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]b(?!-)\>/$1$2ANG\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iu])?[EDC]n(?!-)\>/$1$2ANG\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]q(?!-)\>/$1$2EH\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]w(?!-)\>/$1$2EH\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]e(?!-)\>/$1$2EH\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]r(?!-)\>/$1$2EH\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]t(?!-)\>/$1$2EH\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]y(?!-)\>/$1$2EH\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]a(?!-)\>/$1$2OU\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]s(?!-)\>/$1$2OU\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]d(?!-)\>/$1$2OU\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]f(?!-)\>/$1$2OU\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]g(?!-)\>/$1$2OU\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]h(?!-)\>/$1$2OU\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]z(?!-)\>/$1$2ENG\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]x(?!-)\>/$1$2ENG\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]c(?!-)\>/$1$2ENG\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]v(?!-)\>/$1$2ENG\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]b(?!-)\>/$1$2ENG\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFVBN]n(?!-)\>/$1$2ENG\x30/
    
   # 1.4  éŸ³ç¯€åˆä½µ
    - xform/\<([BPMDTNLGKHY])iEI([0-5])\>/$1I$2/
    - xform/\<([BPMDTNLGKHYZCSR])uOU([0-5])\>/$1U$2/
    - xform/\<YvA([0-5])\>/er$1/
    - xform/\<([BPMDTNLGKHY]i|[BPMDTNLGKHYZCSR]u)E([0-5])\>/$1EE$2/
    - xform/\<([BPMDTNLGKHY]i|[BPMDTNLGKHYZCSR][uv])EH([0-5])\>/$1E$2/
    - xform/\<([BPMDTNLGKHYZCSR])vOU([0-5])\>/$1V$2/
    - xform/\<G([iv][A-Z]+|[IV])([0-5])\>/j$1$2/
    - xform/\<K([iv][A-Z]+|[IV])([0-5])\>/q$1$2/
    - xform/\<H([iv][A-Z]+|[IV])([0-5])\>/x$1$2/
    - xform/\<([ZCS]i?|R)O([0-5])\>/$1I$2/
    - xform/\<([ZCS])(u?[A-Z]+)([0-5])\>/$1h$2$3/
    - xform/\<([ZCS])i([A-Z]+[0-5])\>/$1$2/
    - xform/\<([ZCS])v([A-Z]+[0-5])\>/$1u$2/
    - xform/\<([ZCS])hV([0-5])\>/$1U$2/
    - xform/\<RiAO([0-5])\>/fiao$1/
    - xform/\<Ri([A-Z]+[0-5])\>/f$1/
    - xform/\<Rv([A-Z]+[0-5])\>/fu$1/
    - xform/\<RV([0-5])\>/fu$1/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
   # 1.5  å°–éŸ³è™•ç†
    - xform/\<buo([0-5])\>/ziou$1/
    - xform/\<buei([0-5])\>/zii$1/
    - xform/\<bu(\w+[0-5])\>/zi$1/
    - xform/\<b(v\w*[0-5])\>/z$1/
    - xform/\<puo([0-5])\>/ciou$1/
    - xform/\<puei([0-5])\>/cii$1/
    - xform/\<pu(\w+[0-5])\>/ci$1/
    - xform/\<p(v\w*[0-5])\>/c$1/
    - xform/\<muo([0-5])\>/siou$1/
    - xform/\<muei([0-5])\>/sii$1/
    - xform/\<mu(\w+[0-5])\>/si$1/
    - xform/\<m(v\w*[0-5])\>/s$1/
   # 1.6  ç•°æ‹¼
    - xform/([^y])ueng([0-5])/$1ong$2/
    - xform/veng([0-5])/iong$1/
   # 1.7  æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/\<([jqx])v(?![aoj]-)/$1u/
    - xform/\<y([aoe])(?!-)/$1/
    - xform/([iuv])en(g?[0-5])/$1n$2/
    - xform/([^y])iou([0-5])/$1iu$2/
    - xform/\<yi([aoe])(?!-)/y$1/
    - xform/([uv])ei([0-5])/$1i$2/
    - xform/\<yu([0-5])/wu$1/
    - xform/\<yu([aoe])(?!-)/w$1/
    - xform/\<yu([in])(?![aoej]-)/we$1/
    - xform/\<yv(?![aoj]-)/yu/
    
   # 1.8  ç°¡æ‹¼è™•ç†
    - xform/\<g([iv][aoej]-)/j$1/                           # å‰å…©ç¢¼ç°¡æ‹¼
    - xform/\<k([iv][aoej]-)/q$1/
    - xform/\<h([iv][aoej]-)/x$1/
    - xform/\<y([aoej]-)/$1/
    - xform/\<yu([aoej]-)/w$1/
    - xform/\<([zcs])(u)?([aoej]-)/$1h$2$3/
    - xform/\<([yzcs])i([aoej]-)/$1$2/
    - xform/\<([yzcs])v([aoj]-)/$1u$2/
    - xform/\<ri([aoej]-)/f$1/
    - xform/\<rv([aoj]-)/fu$1/
    - xform/j-/eh-/
    - xform/\<g-/g\x2Fj-/                                   # é¦–ç¢¼ç°¡æ‹¼
    - xform/\<k-/k\x2Fq-/
    - xform/\<h-/h\x2Fx-/
    - xform/\<y-/Â´\x2Fy\x2Fw-/
    - xform/\<([zcs])-/$1h\x2F$1-/
    - xform/\<r-/r\x2Ff-/
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_quanpin}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: &translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼
   __patch:                                # è¬è±¡è©åº«è™•ç†
    __append:
    - xform/\<([a-zÄÅÄ“Ä«Å«Ç–Ã¡Ã³Ã©Ã­ÃºÇ˜ÇÇ’Ä›ÇÇ”ÇšÃ Ã²Ã¨Ã¬Ã¹ÇœÃ¼Å„ÅˆÇ¹]+);[;,a-z]+\>/$1/        # åˆªé™¤è¼”åŠ©ç¢¼
    - xform/Ä(\w*)/a$1\x31/
    - xform/Å(\w*)/o$1\x31/
    - xform/Ä“(\w*)/e$1\x31/
    - xform/Ä«(\w*)/i$1\x31/
    - xform/Å«(\w*)/u$1\x31/
    - xform/Ç–(\w*)/v$1\x31/
    - xform/Ã¡(\w*)/a$1\x32/
    - xform/Ã³(\w*)/o$1\x32/
    - xform/Ã©(\w*)/e$1\x32/
    - xform/Ã­(\w*)/i$1\x32/
    - xform/Ãº(\w*)/u$1\x32/
    - xform/Ç˜(\w*)/v$1\x32/
    - xform/Ç(\w*)/a$1\x33/
    - xform/Ç’(\w*)/o$1\x33/
    - xform/Ä›(\w*)/e$1\x33/
    - xform/Ç(\w*)/i$1\x33/
    - xform/Ç”(\w*)/u$1\x33/
    - xform/Çš(\w*)/v$1\x33/
    - xform/Ã (\w*)/a$1\x34/
    - xform/Ã²(\w*)/o$1\x34/
    - xform/Ã¨(\w*)/e$1\x34/
    - xform/Ã¬(\w*)/i$1\x34/
    - xform/Ã¹(\w*)/u$1\x34/
    - xform/Çœ(\w*)/v$1\x34/
    - xform/Ã¼/v/
    - xform/\w*Å„g?\>/en\x32/
    - xform/\w*Åˆg?\>/en\x33/
    - xform/\w*Ç¹g?\>/en\x34/
    - erase/\w*[^a-z0-9 ]\w*/         # åˆªé™¤å«æœ‰å…¶ä»–éæ³•å­—ç¬¦çš„éŸ³ç¯€
    - xform/\<([a-z]+)\>/$1\x30/      # æœªæ¨™èª¿éŸ³ç¯€è²èª¿æ¨™è¨˜ç‚º0ï¼Œç›®å‰å…¨æ‹¼å¯«æ³•å’Œè¼•è²ç›¸åŒï¼Œå¸¶èª¿æ‹¼éŸ³å¯«æ³•å’Œè¼•è²ç›¸åŒï¼Œæ³¨éŸ³ç¬¦è™Ÿå¯«æ³•å’Œè¼•è²ä¸åŒï¼Œæœªæ¨™èª¿éŸ³ç¯€ä¸æ¨™èª¿ï¼Œä½†èˆ‡å¾Œä¸€å€‹éŸ³ç¯€ä¹‹é–“ç”¨'éš”é–‹ï¼Œåœ‹èªç¾…é¦¬å­—æŠŠémnlré–‹é ­çš„æœªæ¨™èª¿éŸ³ç¯€è½‰æ›ç‚º1è²ï¼Œmnlré–‹é ­çš„æœªæ¨™èª¿éŸ³ç¯€è½‰æ›ç‚º2è²
   # __patch:                                # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šåˆ†å…©æ®µ1
    # __append: {__include: triple_pinyin:/translator/comment_format_copy1}
   # __patch:                                # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šåˆ†å…©æ®µ2
     # __append:
      # __include: triple_pinyin_lishi26.schema:/luna_pinyin_lookup/comment_format?  # è¼¸å…¥ç¢¼ï¼ˆæ–¹æ¡ˆç·¨ç¢¼ï¼‰ï¼šææ°ä¸‰æ‹¼(lssp) / ææ°ä¸‰æ‹¼aeo(lsspaeo) / ææ°æ³¨éŸ³(bopomofo) / å»¿å…­ä¸‰æ‹¼(lishi26)
      # __append: {__include: triple_pinyin:/translator/comment_format_copy2}
   __patch:                                # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šåˆ†å…©æ®µ3
      __append:
       __include: triple_pinyin:/translator/comment_format_pinyin_to_zhuyin  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
       __append: {__include: triple_pinyin:/translator/comment_format_copy3}

ddpy:                # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šå¸¶èª¿æ‹¼éŸ³
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_bopomofo
  spelling_hints: 4 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: *translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_ddpy}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

zhuyin:              # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šæ³¨éŸ³ç¬¦è™Ÿ
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_bopomofo
  spelling_hints: 4 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: *translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_zhuyin}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

guoluo:              # è¼¸å…¥ç¿»è­¯å™¨ï¼šè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šåœ‹èªç¾…é¦¬å­—
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_bopomofo
  spelling_hints: 4 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   __patch: *translator_preedit            # ç¬¬1æ­¥ï¼šè¼¸å…¥ç¢¼->è©å…¸ç·¨ç¢¼
   __patch:                                # ç¬¬2æ­¥ï¼šè©å…¸ç·¨ç¢¼->ä¸Šå±ç¢¼
    __append: {__include: triple_pinyin:/translator/preedit_format_2_pinyin_to_guoluo}  # æ¼¢èªæ‹¼éŸ³å…¨æ‹¼(quanpin) / å¸¶èª¿æ‹¼éŸ³(ddpy) / æ³¨éŸ³ç¬¦è™Ÿ(zhuyin) / åœ‹èªç¾…é¦¬å­—(guoluo)
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

translator:          # ä¸»ç¿»è­¯å™¨ï¼Œä¸è½‰æ›è¼¸å…¥ç¢¼
  dictionary: terra_pinyin.extended
  prism: triple_pinyin_bopomofo
  spelling_hints: 4 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´æç¤ºç¢¼
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  preedit_format:                      # è¼¸å…¥ç¢¼->ä¸Šå±ç¢¼
   # éš”éŸ³ç¬¦è™•ç†
    - xform/'/"/                                            # è¼¸å…¥çš„éš”éŸ³ç¬¦è™Ÿ'è®Šæ›ç‚º"
    # - xform/ /'/                                            # åˆªé™¤è‡ªå‹•ç”Ÿæˆçš„éš”éŸ³ç¬¦ç©ºæ ¼ï¼Œæ›¿æ›ç‚º'
    - xlit|;"| '|                                           # æŠŠ;æ›¿æ›ç‚ºç©ºæ ¼ï¼Œæ¢å¾©è¼¸å…¥çš„éš”éŸ³ç¬¦è™Ÿ'
  comment_format: *translator_comment  # è©å…¸ç·¨ç¢¼->æç¤ºç¢¼

luna_pinyin_lookup:  # æ‹¼éŸ³åæŸ¥
  tag: luna_pinyin_lookup
  dictionary: luna_pinyin
  enable_completion: true
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  prefix: "`"
  suffix: "'"
  tips: ã€”æ‹¼éŸ³åæŸ¥ã€•
  preedit_format:  #  åæŸ¥æ–¹æ¡ˆè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šæ¼¢èªæ‹¼éŸ³å…¨æ‹¼
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
  comment_format: &reverse_lookup_comment  # æœ¬æ–¹æ¡ˆè©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šæœ¬æ–¹æ¡ˆè¼¸å…¥ç¢¼
   # è¬è±¡è©åº«è™•ç†
    - xform/\<([a-zÄÅÄ“Ä«Å«Ç–Ã¡Ã³Ã©Ã­ÃºÇ˜ÇÇ’Ä›ÇÇ”ÇšÃ Ã²Ã¨Ã¬Ã¹ÇœÃ¼Å„ÅˆÇ¹]+);[;,a-z]+\>/$1/        # åˆªé™¤è¼”åŠ©ç¢¼
    - xform/Ä(\w*)/a$1\x31/
    - xform/Å(\w*)/o$1\x31/
    - xform/Ä“(\w*)/e$1\x31/
    - xform/Ä«(\w*)/i$1\x31/
    - xform/Å«(\w*)/u$1\x31/
    - xform/Ç–(\w*)/v$1\x31/
    - xform/Ã¡(\w*)/a$1\x32/
    - xform/Ã³(\w*)/o$1\x32/
    - xform/Ã©(\w*)/e$1\x32/
    - xform/Ã­(\w*)/i$1\x32/
    - xform/Ãº(\w*)/u$1\x32/
    - xform/Ç˜(\w*)/v$1\x32/
    - xform/Ç(\w*)/a$1\x33/
    - xform/Ç’(\w*)/o$1\x33/
    - xform/Ä›(\w*)/e$1\x33/
    - xform/Ç(\w*)/i$1\x33/
    - xform/Ç”(\w*)/u$1\x33/
    - xform/Çš(\w*)/v$1\x33/
    - xform/Ã (\w*)/a$1\x34/
    - xform/Ã²(\w*)/o$1\x34/
    - xform/Ã¨(\w*)/e$1\x34/
    - xform/Ã¬(\w*)/i$1\x34/
    - xform/Ã¹(\w*)/u$1\x34/
    - xform/Çœ(\w*)/v$1\x34/
    - xform/Ã¼/v/
    - xform/\w*Å„g?\>/en\x32/
    - xform/\w*Åˆg?\>/en\x33/
    - xform/\w*Ç¹g?\>/en\x34/
    - erase/\w*[^a-z0-9 ]\w*/         # åˆªé™¤å«æœ‰å…¶ä»–éæ³•å­—ç¬¦çš„éŸ³ç¯€
    - xform/\<([a-z]+)\>/$1\x35/      # æœªæ¨™èª¿éŸ³ç¯€çµ±ä¸€è½‰æ›ç‚ºè¼•è²
   # 1  éŸ³ç¯€ä¿®æ­£åˆä½µ
    - erase/\<xx\>/
    - xform/\<m([1-5])\>/mu$1/        # é¼»éŸ³mï¼ˆå‘£ï¼‰è½‰åŒ–çˆ²mu
    - xform/\<r5\>/er5/               # r5ï¼ˆå…’ï¼‰è½‰åŒ–çˆ²er5
    # - xform/\<eh([1-5])\>/e$1/        # æ¨¡ç³ŠéŸ³ï¼šehï¼ˆèª’æ¬¸ï¼‰ã€eåˆä½µ
   # 2  æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/\<([jqx])u/$1v/
    - xform/iu/iou/
    - xform/([uv])i/$1ei/
    - xform/(?<![uwv])ong/ung/
    - xform/([uwv])ong/$1ng/
    - xform/\<yi?/i/
    - xform/\<wu?/u/
    - xform/iu/v/
    - xform/([iuv])n/$1en/
   # 3  ç•°æ‹¼
    # - xform/([bpm])ueng/$1ong/
    # - xform/([bpm])veng/$1iong/
    # - derive/ueng/ong/
    # - derive/veng/iong/
    # - xform/(\w+)ueng/$1ong/
    # - xform/veng/iong/
    - erase/([bpm])([uv][a-z]+|v)([1-5])\>/
    - erase/fao([1-5])\>/
    - erase/(\w*)(iei|uou|vou)([1-5])\>/
    - erase/(\w*)v(ee|ao|ang)([1-5])\>/
    - erase/([zcs])io([1-5])\>/
   # 4  å°–éŸ³è™•ç†
    - xform/\<ziou([1-5])\>/buo$1/
    - xform/\<zii([1-5])\>/buei$1/
    - xform/\<zi(\w+[1-5])\>/bu$1/
    - xform/\<z(v\w*[1-5])\>/b$1/
    - xform/\<ciou([1-5])\>/puo$1/
    - xform/\<cii([1-5])\>/puei$1/
    - xform/\<ci(\w+[1-5])\>/pu$1/
    - xform/\<c(v\w*[1-5])\>/p$1/
    - xform/\<siou([1-5])\>/muo$1/
    - xform/\<sii([1-5])\>/muei$1/
    - xform/\<si(\w+[1-5])\>/mu$1/
    - xform/\<s(v\w*[1-5])\>/m$1/
   # 5  éŸ³ç¯€åˆä½µ
    - xform/\<([zcs]h?|r)i([1-5])\>/$1o$2/
    - xform/\<([zcs])([aoe]\w*)([1-5])\>/$1hi$2$3/
    - xform/\<([zcs])u([aoe]\w*)?([1-5])\>/$1hv$2$3/
    - xform/\<f([aoe]\w*)([1-5])\>/ri$1$2/
    - xform/\<fiao([1-5])\>/riao$1/
    - xform/\<fu([aoe]\w*)?([1-5])\>/rv$1$2/
    
   # 6  ç¬¬1ç¢¼è²æ¯
    - xform/\<b/Q/
    - xform/\<p/W/
    - xform/\<m/E/
    - xform/\<[fr]/R/
    - xform/\<d/A/
    - xform/\<t/S/
    - xform/\<n/D/
    - xform/\<l/F/
    - xform/\<[gj]/Z/
    - xform/\<[kq]/X/
    - xform/\<[hx]/C/
    - xform/\<([aoeiuv])/V$1/
    - xform/\<zh?/T/
    - xform/\<ch?/G/
    - xform/\<sh?/B/
   # 7  ç¬¬2ç¢¼éŸ»æ¯
    - xform/\<([QWERTASDFGZXCVB])(a|ai|an)([1-5])\>/$1Q$2$3/
    - xform/\<([QWERTASDFGZXCVB])(o|ei|en)([1-5])\>/$1W$2$3/
    - xform/\<([QWERTASDFGZXCVB])(e|ao|ang)([1-5])\>/$1E$2$3/
    - xform/\<([QWERTASDFGZXCVB])(eh|ou|eng)([1-5])\>/$1R$2$3/
    
    - xform/\<([QWERTASDFGZXCVB])(ia|iai|ian)([1-5])\>/$1A$2$3/
    - xform/\<([QWERTASDFGZXCVB])(io|iei|ien|i)([1-5])\>/$1S$2$3/
    - xform/\<([QWERTASDFGZXCVB])(iee|iao|iang)([1-5])\>/$1D$2$3/
    - xform/\<([RTGB])(ie)([1-5])\>/$1D$2$3/
    - xform/\<([QWERTASDFGZXCVB])(ie|iou|ieng)([1-5])\>/$1F$2$3/
    
    - xform/\<([QWERTASDFGZXCVB])(ua|uai|uan)([1-5])\>/$1Z$2$3/
    - xform/\<([QWERTASDFGZXCVB])(uo|uei|uen)([1-5])\>/$1X$2$3/
    - xform/\<([QWERTASDFGZXCVB])(uee|uao|uang)([1-5])\>/$1C$2$3/
    - xform/\<([QWERTASDFGZXCVB])(ue|uou|ueng|u)([1-5])\>/$1V$2$3/
    
    - xform/\<([QWERTASDFGZXCVB])(va|vai|van|er)([1-5])\>/$1T$2$3/
    - xform/\<([QWERTASDFGZXCVB])(vo|vei|ven)([1-5])\>/$1G$2$3/
    - xform/\<([QWERTASDFGZXCVB])(ve|vou|veng|v)([1-5])\>/$1B$2$3/
   # 8  ç¬¬3ç¢¼å»é‡ç¢¼&è²èª¿
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])1\>/$1Q/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])2\>/$1W/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])3\>/$1E/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])4\>/$1R/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iu]ee|e[hr])5\>/$1T/
    
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])1\>/$1A/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])2\>/$1S/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])3\>/$1D/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])4\>/$1F/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]i|[iuv]?ao|[iuv]?ou|[iuv])5\>/$1G/
    
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)1\>/$1Z/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)2\>/$1X/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)3\>/$1C/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)4\>/$1V/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]ng?)5\>/$1B/
    
    - erase/\<[QWERTASDFGZXCVB][a-z0-9]+/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - erase/\<[yuiophjklnm]\w*/
    
   # 9  ç°¡æ‹¼
    # - derive/\<t([qwertasdfgzxcvb]{2})\>/y$1/
    # - derive/\<g([qwertasdfgzxcvb]{2})\>/h$1/
    # - derive/\<b([qwertasdfgzxcvb]{2})\>/n$1/
    # - abbrev/\<([qwertasdfgzxcvbyhn])[qwertasdfgzxcvb]{2}\>/$1/     # é¦–ç¢¼ç°¡æ‹¼
    # - derive/\<([qwertasdfgzxcvbyhn])t([qwertasdfgzxcvb])\>/$1y$2/
    # - derive/\<([qwertasdfgzxcvbyhn])g([qwertasdfgzxcvb])\>/$1h$2/
    # - derive/\<([qwertasdfgzxcvbyhn])b([qwertasdfgzxcvb])\>/$1n$2/
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[qwertasdfgzxcvb]\>/$1/     # å‰å…©ç¢¼ç°¡æ‹¼
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[qwert]\>/$1y/
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[asdfg]\>/$1h/
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[zxcvb]\>/$1n/
    # - derive/\<([qwertasdfgzxcvbyhn])([qwertasdfgzxcvbyhn]{2})\>/$2/     # å¾Œå…©ç¢¼ç°¡æ‹¼
    
   # 10 è®Šå½¢
    - xlit/qwertasdfgzxcvb/QWERTASDFGZXCVB/

stroke_lookup:       # ç­†ç•«åæŸ¥
  tag: stroke_lookup
  dictionary: stroke
  enable_completion: true
  always_show_comments: true           # å§‹çµ‚é¡¯ç¤ºæç¤ºç¢¼
  prefix: "~"
  suffix: "'"
  tips: ã€”ç­†ç•«åæŸ¥ã€•
  preedit_format:  #  åæŸ¥æ–¹æ¡ˆè¼¸å…¥ç¢¼->ä¸Šå±ç¢¼ï¼šäº”ç­†ç•«å½¢å¼
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ãƒ•/
  comment_format: *reverse_lookup_comment  # æœ¬æ–¹æ¡ˆè©å…¸ç·¨ç¢¼->æç¤ºç¢¼ï¼šæœ¬æ–¹æ¡ˆè¼¸å…¥ç¢¼

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    - { accept: "Control+q", when: always, send: "" }  # ä¿ç•™ç»™ Lua å¤„ç†å™¨ä½¿ç”¨
    - { accept: "Control+l", when: always, send: "" }  # ä¿ç•™ç»™ Lua å¤„ç†å™¨ä½¿ç”¨
    - { accept: "Control+m", when: always, send: "" }  # ä¿ç•™ç»™ Lua å¤„ç†å™¨ä½¿ç”¨
  
    - { accept: Return, send: "Shift+Return", when: composing }
    - { accept: "Shift+Return", send: Return, when: composing }
    
    - { accept: minus, send: minus, when: has_menu }
    - { accept: minus, send: Page_Up, when: paging }
    # - { accept: minus, send: Page_Up, when: has_menu }
    # - { accept: equal, send: Page_Down, when: has_menu }
    
    - { accept: comma, send: comma, when: paging }
    # - { accept: comma, send: Page_Up, when: paging }
    - { accept: period, send: period, when: has_menu }
    # - { accept: period, send: Page_Down, when: has_menu }
    
    # - { accept: semicolon, send: 2, when: has_menu }
    # - { accept: apostrophe, send: 3, when: has_menu }
    
    - {accept: "Control+Shift+5", toggle: ascii_punct, when: always}
    - {accept: "Control+Shift+percent", toggle: ascii_punct, when: always}
    
    - {accept: "Control+Shift+F", toggle: simplification, when: always}

recognizer:
  import_preset: default
  patterns:
    email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"
    uppercase: "[A-Z][-_+.'0-9A-Za-z]*$"
    url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    luna_pinyin_lookup: "`[a-z]*'?$"
    stroke_lookup: "~[a-z]*'?$"

__patch:             # ç°¡é«”è©åº«è½‰æ›ç‚ºç¹é«”
  switches/@after 1: {name: op_n, reset: 1}            # æ·»åŠ ç°¡è½‰ç¹é–‹é—œä¸¦é–å®šç°¡è½‰ç¹ç‹€æ…‹ï¼Œæ³¨æ„ä¸å¯«statesï¼ˆä¸åœ¨é–‹é—œèœå–®ä¸­é¡¯ç¤ºï¼‰
  engine/filters/@before 0: simplifier@sc_tc           # å…ˆåŠ è¼‰ç°¡è½‰ç¹éæ¿¾å™¨
  sc_tc: {option_name: op_n, opencc_config: s2t.json}  # s2t é€šç”¨ç¹é«”/s2hk é¦™æ¸¯ç¹é«”/s2tw å°ç£ç¹é«”

__patch:             # ä½¿ç”¨èªè¨€æ¨¡å‹
  - grammar:/triple_pinyin_hant?
